<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CROUTE</title>
    <link rel="stylesheet" href="libs/bootstrap-4.5.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="static/css/main.css">
</head>
<body>

<div class="container">
    <div class="jumbotron jumbotron-fluid text-center image-title">
        <div class="title-background"></div>
        <div class="title-background-overlay"></div>
        <div class="container title-content">
            <h1 class="display-1">CROUTE</h1>
            <p class="lead">Route Coverage Testing For Autonomous Vehicles via Map Modeling</p>
        </div>
    </div>

    <section class="container">
        <div class="row">
            <h2>MAP MODELING</h2>
        </div>
        <div class="row">
            <div class="col-sm">
                <img src="static/media/san_francisco_junction_location.png" alt="San Francisco Junction Map"
                     width="100%">
            </div>
            <div class="col-sm">
                <h5>San Francisco</h5>
                <p>The map contains 84 valid junctions.</p>
                <p><b><i>CROUTE</i></b> extracts:</p>
                <ul>
                    <li>19 unique weak topology features</li>
                    <li>76 unique route features</li>
                </ul>
                <p>and generates: </p>
                <ul>
                    <li>29 junction groups in total</li>
                    <li>22 junction groups selected for testing</li>
                </ul>
                <p>The details of junction grouping are shown in table below.</p>
                <small>Note that the san francisco map version is for Apollo 5.0.</small>
            </div>
        </div>
        <div class="row my-5">
            <div class="col">
                <img width="100%" src="static/media/san_francisco_junction_grouping.png"
                     alt="San Francisco Junction Grouping Table">
            </div>
        </div>
    </section>

    <section class="container">
        <div class="row">
            <h2>JUNCTION GROUP TOPOLOGY DIAGRAMS</h2>
        </div>
        <div class="row flex-row junction-topology-diagram-container justify-content-center">
            <img src="static/media/junction-modeling/topo-diagram-1.png" alt="Junction Topology Diagram 1">
            <img src="static/media/junction-modeling/topo-diagram-2.png" alt="Junction Topology Diagram 2">
            <img src="static/media/junction-modeling/topo-diagram-3.png" alt="Junction Topology Diagram 3">
            <img src="static/media/junction-modeling/topo-diagram-4.png" alt="Junction Topology Diagram 4">
            <img src="static/media/junction-modeling/topo-diagram-5.png" alt="Junction Topology Diagram 5">
            <img src="static/media/junction-modeling/topo-diagram-6.png" alt="Junction Topology Diagram 6">
            <img src="static/media/junction-modeling/topo-diagram-7.png" alt="Junction Topology Diagram 7">
        </div>

        <div class="row">
            <h2>ROUTE FEATURE DIAGRAMS</h2>
        </div>

        <div class="row flex-row route-feature-diagram-container justify-content-center">
            <img src="static/media/junction-modeling/env_key_forward_left_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_forward_left_2.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_forward_left_3.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_forward_right_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_forward_right_2.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_forward_right_3.png" alt=""/>
        </div>
        <p class="text-center">change lane after junction</p>

        <div class="row flex-row route-feature-diagram-container justify-content-center">
            <img src="static/media/junction-modeling/env_key_left_1_forward.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_left_2_forward.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_1_forward.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_2_forward.png" alt=""/>
        </div>
        <p class="text-center">change lane before junction</p>

        <div class="row flex-row route-feature-diagram-container justify-content-center">
            <img src="static/media/junction-modeling/env_key_forward_forward.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_left_1_left_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_left_1_left_2.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_left_1_right_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_left_1_right_2.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_left_1_right_3.png" alt=""/>

            <img src="static/media/junction-modeling/env_key_left_2_left_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_left_3_left_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_left_3_right_2.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_left_3_right_3.png" alt=""/>

            <img src="static/media/junction-modeling/env_key_right_1_left_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_1_left_2.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_1_left_3.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_1_right_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_1_right_2.png" alt=""/>

            <img src="static/media/junction-modeling/env_key_right_2_left_3.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_3_left_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_2_right_1.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_3_left_2.png" alt=""/>
            <img src="static/media/junction-modeling/env_key_right_3_left_3.png" alt=""/>
        </div>
        <p class="text-center">others</p>
    </section>

    <section class="container">
        <div class="row">
            <h2>ISSUES DISCOVERED</h2>
        </div>
        <div class="media">
            <div class="row w-50 mr-3 ml-0">
                <video style="width: 100%;" controls class="align-self-start mr-3">
                    <source src="static/media/issue-videos/insufficient-distance-for-continual-lane-changing.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="row">
                    <div class="col pt-3">
                        <small>Expected Path</small>
                    </div>
                    <div class="col">
                        <img style="height: 8rem; margin:1rem;"
                             src="static/media/issue-videos/insufficient-distance-lane-change.svg"
                             alt="Expected Path">
                    </div>
                    <div class="col pt-3">
                        <small>Actual Path</small>
                    </div>
                    <div class="col">
                        <img style="height: 8rem; margin:1rem;"
                             src="static/media/issue-videos/insufficient-distance-lane-change-reality.svg"
                             alt="Actual Path">
                    </div>
                </div>
            </div>

            <div class="media-body">
                <h5 class="mt-0">Insufficient Distance for Continual Lane Changing</h5>
                <p>Apollo requires a long distance for lane changing (at least about
                    50 meters from our experimental discovery), which sometimes
                    is too conservative, resulting in a big detour or even
                    incompleteness of a motion task.</p>
                <p>In the video, Apollo is expected to perform one lane changing to the right and turn right in the junction.
                    Although it's routing module computes a correct route (red lines on the map),
                    Apollo's planning and control module fail to complete the lane changing before entering the junction
                    and eventually results in a re-routing within junction.</p>
            </div>
        </div>
        <div class="media">
            <div class="row w-50 mr-3 ml-0">
                <video style="width: 100%;" controls class="align-self-start mr-3">
                    <source src="static/media/issue-videos/inefficient-routing.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <div class="row">
                    <div class="col pt-3">
                    <small>Expected Routing</small>
                    </div>
                    <div class="col">
                        <img style="height: 8rem; margin:1rem;"
                             src="static/media/issue-videos/inefficient-routing-expectation.svg"
                             alt="Expected Routing Result">
                    </div>
                    <div class="col pt-3">
                    <small>Apollo Routing</small>
                    </div>
                    <div class="col">
                        <img style="height: 8rem; margin:1rem;"
                             src="static/media/issue-videos/inefficient-routing-reality.svg"
                             alt="Real Routing">
                    </div>
                </div>
            </div>

            <div class="media-body">
                <h5 class="mt-0">Inefficient Routing</h5>
                <div class="row">
                    <div class="col">
                        <p>The default configurations for
                            Apollo’s routing algorithm (i.e., A*) prefer to avoid
                            changing lanes before entering a junction even if there are
                            sufficient distance for continual lane changing, resulting
                            in a big detour without any lane changing.</p>
                        <p>In the video, Apollo is expected to turn right in the junction and
                            perform three continuous lane changing to the left to reach the destination as shown in the left diagram.
                        However, Apollo's routing module assigns high cost to lane changing actions during optimal route searching,
                            which resulted in a big circle involving additional three junctions, as shown in the right diagram.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-start mr-3">
                <source src="static/media/issue-videos/stuck-at-stop-sign.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">Stuck Motion at Stop Signs</h5>
                <p>When Apollo passes a junction
                    controlled by stop signs, it stops before the white
                    stopping line and never moves again.</p>
                <p>In the video, Apollo stops behind the stop line at the stop-sign controlled junction.
                    It is expected to surge forward while checking obstacles from both left and right side, before crossing.
                Internally Apollo uses "<b>scenario</b>" manager to complete such action flow.
                    However, when scenario manager fails, it cannot switch from "<b>scenario: stop before stop line</b>" to "scenario: surge forward",
                    which makes Apollo to stop forever.</p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-start mr-3">
                <source src="static/media/issue-videos/insufficient-rerouting.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">Insufficient Rerouting</h5>
                <p>When there are obstacles ahead,
                    Apollo always performs overtaking, rather than executing
                    lane changing and re-routing a new route. It will result in
                    long-distance motion along the boundary of two adjacent
                    lanes or lane changing in a junction.</p>
                <p>In the video, Apollo is expected to drive forward across the junction
                    then perform three continuous lane changing to the left.
                    When it detects that starting lane is blocked by obstacles,
                    it is expected to re-route, starting with a lane change to the left and followed by two continuous lane changing after junction.
                Instead, Apollo keeps trying to overtake the obstacles, driving on the lane boundaries and eventually performed a lane change within the junction.</p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-start mr-3">
                <source src="static/media/issue-videos/lane-change-terminated-halfway.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">Lane Gap</h5>
                <p>Apollo has a default configuration to define
                    the maximal width of a lane. When a lane’s width is
                    larger than this configuration, Apollo cannot recognize
                    the actual width but increase the gap with the adjacent
                    lane. Hence, Apollo can plan a feasible route but cannot
                    perform a successful lane changing (e.g., terminating lane
                    changing halfway and turning back to the original one).</p>
                <p>In the video, Apollo is expected to turn right in the junction and perform a lane changing to right afterwards
                However, due to the increasing lane gap between the two adjacent lanes after the junction,
                    Apollo fails to complete the lane change and reverts back, thus unable to reach the destination.</p>
            </div>
        </div>
        <div class="media">
            <video width="50%" controls class="align-self-start mr-3">
                <source src="static/media/issue-videos/curb-mismatch.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="media-body">
                <h5 class="mt-0">Map Errors</h5>
                <p>Since the HD maps are constructed manually,
                    different errors, such as location mismatch of curbs and
                    disordered points forming a lane, are present.</p>
                <p>In the video, there is a clear mismatch on the junction boundary.
                    Apollo has planned a valid trajectory based on the HD map, with a small gap from the curb.
                In simulator, however, Apollo's 3D model collides with the curb and cannot drive forward.</p>
            </div>
        </div>
    </section>
</div>


<!--<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>-->
<script src="libs/bootstrap-4.5.3-dist/js/http_code.jquery.com_jquery-3.5.1.slim.js"></script>
<script src="libs/bootstrap-4.5.3-dist/js/http_cdn.jsdelivr.net_npm_popper.js@1.16.1_dist_umd_popper.js"></script>
<script src="libs/bootstrap-4.5.3-dist/js/bootstrap.bundle.min.js"></script>

<script src="static/js/index.js"></script>
</body>
</html>